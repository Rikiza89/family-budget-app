<!-- templates/budget/ai_analysis.html -->
{% extends 'budget/base.html' %}
{% load i18n %}

{% block content %}
<div class="p-4">
    <h2 class="text-2xl font-bold mb-6">ğŸ¤– {% trans "AIæ”¯å‡ºåˆ†æ" %}</h2>

    <!-- Summary -->
    <div class="grid grid-cols-2 gap-4 mb-6">
        <div class="bg-blue-50 p-4 rounded-lg">
            <p class="text-sm text-gray-600">{% trans "ç·åå…¥ï¼ˆ3ãƒ¶æœˆï¼‰" %}</p>
            <p class="text-2xl font-bold text-blue-600">{{ currency_symbol }}{{ total_income|floatformat:0 }}</p>
        </div>
        <div class="bg-red-50 p-4 rounded-lg">
            <p class="text-sm text-gray-600">{% trans "ç·æ”¯å‡ºï¼ˆ3ãƒ¶æœˆï¼‰" %}</p>
            <p class="text-2xl font-bold text-red-600">{{ currency_symbol }}{{ total_expense|floatformat:0 }}</p>
        </div>
    </div>

    <!-- AI Analysis -->
    <div class="bg-white rounded-lg shadow p-6 mb-6">
        <h3 class="font-bold mb-4 flex items-center">
            <span class="text-2xl mr-2">âœ¨</span>
            {% trans "Gemini AIåˆ†æçµæœ" %}
        </h3>
        <div class="prose max-w-none">
            {{ ai_analysis|safe }}
        </div>
    </div>

    <!-- Category Breakdown -->
    <div class="bg-white rounded-lg shadow p-4">
        <h3 class="font-bold mb-4">{% trans "ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥è©³ç´°" %}</h3>
        <div class="space-y-2">
            {% for cat_name, data in category_totals.items %}
            {% if data.type == 'expense' %}
            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                <div>
                    <p class="font-medium">{{ cat_name }}</p>
                    <p class="text-xs text-gray-500">{{ data.count }}{% trans "å›" %}</p>
                </div>
                <span class="font-bold text-red-600">{{ currency_symbol }}{{ data.total|floatformat:0 }}</span>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}