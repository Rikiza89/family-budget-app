# 📖 家計簿アプリ 使い方ガイド

## 目次
1. [初回セットアップ](#初回セットアップ)
2. [基本操作](#基本操作)
3. [定期取引機能](#定期取引機能)
4. [メール通知設定](#メール通知設定)
5. [将来予測機能](#将来予測機能)
6. [家族メンバー招待](#家族メンバー招待)
7. [貯蓄の記録方法](#貯蓄の記録方法)
8. [予算管理](#予算管理)
9. [よくある質問](#よくある質問)

---

## 初回セットアップ

### 1. アカウント作成
1. トップページの「無料で始める」をタップ
2. ユーザー名（英数字）を入力
3. パスワード（8文字以上）を入力
4. メールアドレス（任意）を入力
5. 「アカウント作成」をタップ

### 2. 家族情報の登録
- **家族名**: 田中家、佐藤ファミリーなど
- **ニックネーム**: パパ、ママ、太郎など

### 3. カテゴリー設定
「デフォルトカテゴリーを使用」にチェック → 次へ

**自動作成されるカテゴリー:**
- **支出**: 食費、外食、日用品、交通費、光熱費、通信費、医療費、娯楽、衣服、保険（積立）、その他
- **収入**: 給料、賞与、副収入、その他収入

### 4. 支払方法設定
「次へ」をタップで自動作成：
- 現金、クレジットカード、交通系ICカード、PayPay、銀行振込

### 5. 完了
ダッシュボードが表示されます 🎉

---

## 基本操作

### 支出を記録する
1. 右下の「+」ボタンまたは「支出を記録」をタップ
2. 金額を入力（クイック金額ボタン使用可）
3. カテゴリーを選択
4. 支払方法を選択
5. 「保存」をタップ

**Tips**: 種類（支出/収入）を選ぶと、該当カテゴリーのみ表示されます

### 収入を記録する
1. 「収入を記録」をタップ
2. 種類で「💰 収入」を選択
3. カテゴリー（給料、賞与など）を選択
4. 金額を入力
5. 「保存」をタップ

### レシート写真を添付
1. クイック入力画面で「レシート（任意）」をタップ
2. カメラで撮影またはギャラリーから選択
3. 保存

### 取引を確認・削除
1. メニュー → 「取引履歴」
2. 削除したい取引をタップ
3. 「削除」をタップ → 確認

---

## 定期取引機能

### 定期取引とは
家賃、給料、保険料など、定期的に発生する収支をテンプレート化して管理

### 定期取引の登録

1. メニュー → 「定期取引」
2. 「➕ 追加」をタップ
3. 以下を入力：
   - 種類（収入/支出）
   - カテゴリー
   - 金額
   - 支払方法
   - **頻度**: 毎日/毎週/毎月/毎年
   - **開始日**: いつから開始するか
   - **終了日**: いつまで続くか（任意）
   - **毎月の日付**: 月次の場合、何日に記録するか（例: 25）
4. 「追加」をタップ

### 一括記録機能（⚡ワンクリック）

**使い方:**
1. メニュー → 「定期取引」
2. 「⚡ すべての定期取引を一括記録」をタップ
3. 記録すべき取引のリストを確認
4. 「記録する」をタップ

**いつ使う?**
- 毎月の給料日
- 月初めの固定費支払い時
- 家賃や保険料の引き落とし日

**Tips**: 記録済みの取引は自動的にスキップされます

### 定期取引の管理

**有効/無効の切り替え:**
- 定期取引リストで「有効」「無効」をタップ
- 一時的に不要な取引を停止できます

**例:**
- 夏のボーナス（年2回）→ 6月と12月のみ有効
- 賃貸契約終了 → 無効化

---

## メール通知設定

### 記録忘れリマインダー

**設定方法:**
1. メニュー → 「📧 メール通知」
2. 「通知を有効にする」にチェック
3. **何日間記録がない場合に通知するか** を設定（例: 3日）
4. **通知先メールアドレス** を入力（1行1アドレス）
   ```
   papa@example.com
   mama@example.com
   ```
5. 「保存」をタップ

### メール通知の仕組み

- 設定した日数（例: 3日間）記録がないと自動メール送信
- 1日1回まで送信（スパム防止）
- 家族全員に通知可能

### サーバー設定（管理者向け）

**Cronジョブの設定:**
```bash
# 毎日朝9時に実行
0 9 * * * cd /path/to/project && python manage.py send_log_reminders
```

**SMTP設定（settings.py）:**
```python
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'your-email@gmail.com'
EMAIL_HOST_PASSWORD = 'your-app-password'
```

---

## 将来予測機能

### 将来予測とは
過去12ヶ月の実績データから、最大60年先の貯蓄推移を予測

### 使い方

1. メニュー → 「📈 将来予測」
2. **予測期間を選択**:
   - スピナーをマウスホイールでスクロール
   - スマホでスワイプ操作
   - 1〜60年の範囲で調整
3. グラフが自動更新されます

### 表示される情報

**現在の貯蓄:**
- 現金貯蓄: 純粋な積立金額
- 保険積立: 生命保険などの積立総額

**予測グラフ:**
- 🟣 **現金貯蓄**: 将来の現金貯蓄推移
- 🟢 **保険積立**: 将来の保険積立推移
- 🔵 **総貯蓄**: 合計貯蓄の推移

**年平均（過去12ヶ月）:**
- 毎月平均でいくら貯蓄しているか表示

### 予測の精度

- 過去12ヶ月の平均値を使用
- 定期取引テンプレートも考慮
- あくまで目安（実際は変動します）

### 活用例

**ライフプラン設計:**
- 20年後の子供の教育資金は？
- 30年後の老後資金は足りる？
- 住宅購入の頭金はいつ貯まる？

---

## 家族メンバー招待

### 招待リンクの作成

1. メニュー → 「設定」 → 「家族情報」 → 「メンバー管理」
2. 「新規作成」をタップ
3. 招待リンクが表示される
4. 「コピー」をタップ

### 招待リンクの送信

**LINE で送る:**
```
家計簿アプリに招待するね！
このリンクから登録してね👇
[コピーしたリンクを貼り付け]
```

**メールで送る:**
```
件名: 家族の家計簿に招待します

家計簿アプリで一緒に家計管理しませんか？
下記リンクからアカウント作成してください：

[コピーしたリンクを貼り付け]

有効期限: 7日間
```

### 招待された人の操作

1. 送られてきたリンクをタップ
2. 「〇〇家に招待されています」と表示される
3. ユーザー名・パスワードを入力してアカウント作成
4. ニックネームを入力（例: 太郎）
5. 「参加する」をタップ
6. 完了！家族の家計簿にアクセスできます

### 招待の管理

**有効な招待を確認:**
- メニュー → 設定 → メンバー管理
- 「招待リンク」セクションに表示

**招待を削除:**
- 「削除」ボタンをタップ

**注意事項:**
- 招待の有効期限: 7日間
- 1つの招待リンクは1回のみ使用可能
- 使用後は自動的に無効化

---

## 貯蓄の記録方法

### 現金貯蓄（貯金）

**用途:** 給料からの積立、ボーナス貯金など

**記録方法:**
1. メニュー → 「貯金を登録」
2. 金額を入力
3. 日付を選択（デフォルト: 今日）
4. メモ（任意）: 「給料から3万円」など
5. 「貯金を保存」をタップ

**効果:**
- 使えるお金が減る
- 長期貯蓄に計上される
- 貯蓄サマリーの「現金貯蓄」に表示
- 将来予測グラフに反映

### 保険型積立（保険・学資保険など）

**用途:** 生命保険、学資保険、養老保険の積立

**記録方法:**
1. 「支出を記録」をタップ
2. 種類: 「💸 支出」を選択
3. カテゴリー: 「保険（積立）」を選択
4. 金額を入力
5. 「保存」をタップ

**効果:**
- 月次支出に計上される
- 同時に長期貯蓄にも計上される
- 貯蓄サマリーの「保険積立」に表示
- ダッシュボードのグラフに「貯蓄」として表示
- 将来予測に含まれる

### 貯蓄を確認

1. メニュー → 「貯蓄サマリー」
2. 以下が表示されます：
   - 総貯蓄額（現金貯蓄 + 保険積立）
   - 現金貯蓄の履歴
   - 保険積立の履歴

---

## 予算管理

### 予算を設定する

1. メニュー → 「予算管理」
2. 「予算を追加」セクションで：
   - カテゴリーを選択（例: 食費）
   - 月額予算を入力（例: 50000）
3. 「予算を追加」をタップ

### 予算の確認

**色分け表示:**
- 🟢 **緑色**: 正常（80%未満）
- 🟡 **黄色**: 注意（80%以上）
- 🔴 **赤色**: 予算オーバー

**ダッシュボードで確認:**
- 「予算状況」セクションに表示
- 使用率がバーで表示
- オーバーした場合は赤色で警告

**予算管理画面で確認:**
- メニュー → 「予算管理」
- すべてのカテゴリーの予算状況を一覧表示
- 残額・使用率を確認

### 予算の編集

1. メニュー → 「予算管理」
2. 編集したい予算の「編集」をタップ
3. 金額を変更
4. 「更新」をタップ

### 予算の削除

1. メニュー → 「予算管理」
2. 削除したい予算の「削除」をタップ
3. 確認画面で「削除する」をタップ

---

## カテゴリー・支払方法の管理

### カテゴリーを追加

1. メニュー → 設定 → カテゴリー → 「管理」
2. 「➕ 追加」をタップ
3. 以下を入力：
   - カテゴリー名（例: 習い事）
   - 種類（支出 or 収入）
   - アイコン（絵文字）: 🎨
   - 保険積立として扱う: チェックなし
4. 「追加」をタップ

### カテゴリーを編集

1. カテゴリー管理画面で「編集」をタップ
2. 内容を変更
3. 「更新」をタップ

### 支払方法を追加

1. メニュー → 設定 → 支払方法 → 「管理」
2. 「➕ 追加」をタップ
3. 以下を入力：
   - 支払方法名（例: 楽天カード）
   - 種類（クレジットカード）
4. 「追加」をタップ

---

## データのエクスポート

### CSV出力

1. メニュー → 設定 → データエクスポート
2. 年・月を選択
3. 「CSVダウンロード」をタップ
4. ファイルがダウンロードされます

**CSVの内容:**
```
日付, 種類, カテゴリー, 金額, 支払方法, メモ, 登録者
2025/01/15, 支出, 食費, 3500, 現金, スーパー, ママ
```

**使い道:**
- Excel/Googleスプレッドシートで分析
- 確定申告の資料作成
- バックアップ

---

## 言語切り替え

### 日本語 ⇄ イタリア語

**ログイン前:**
- 画面上部中央のドロップダウン: 🇯🇵 日本語 / 🇮🇹 Italiano

**ログイン後:**
- ヘッダー右側のドロップダウン: 🇯🇵 / 🇮🇹

選択すると自動的にページが再読み込みされ、選んだ言語で表示されます。

---

## よくある質問

### Q: 家族メンバーは何人まで追加できますか？
A: 制限はありません。招待リンクを作成して、何人でも追加できます。

### Q: 定期取引の一括記録で、すでに記録済みの取引は？
A: 自動的にスキップされます。重複記録の心配はありません。

### Q: 将来予測の精度は？
A: 過去12ヶ月の平均値を使用しているため、あくまで目安です。実際の収支は変動します。

### Q: メール通知が届かない場合は？
A: SMTP設定を確認してください。Gmailの場合は2段階認証とアプリパスワードが必要です。

### Q: 間違って記録した取引を修正できますか？
A: 現在は削除のみ可能です。間違った取引を削除して、正しい内容で再登録してください。

### Q: データは安全ですか？
A: データはサーバーに保存されます。重要なデータは定期的にCSVエクスポートでバックアップすることをおすすめします。

### Q: オフラインで使えますか？
A: 現在はインターネット接続が必要です。PWA対応は今後の予定に含まれています。

### Q: 過去のデータはどこまで遡れますか？
A: 制限なく、すべての取引履歴が保存されます。

### Q: 招待リンクの有効期限が切れたらどうなりますか？
A: 新しい招待リンクを作成してください。古いリンクは自動的に無効化されます。

### Q: カテゴリーを削除できないのはなぜですか？
A: そのカテゴリーを使用している取引が存在する場合、削除できません。先に該当する取引を削除するか、別のカテゴリーに変更してください。

### Q: 複数の家族グループを作れますか？
A: 1つのアカウントにつき1つの家族グループのみです。別の家族グループを作る場合は、新しいアカウントを作成してください。

### Q: スマホとPCで使えますか？
A: はい。モバイル最適化されていますが、PCのブラウザでも利用可能です。

### Q: 予算の色（緑・黄・赤）の基準は？
A: 緑=80%未満、黄=80%以上、赤=100%超過です。

---

## 📞 サポート

問題が発生した場合：
1. ブラウザのキャッシュをクリア
2. ログアウト → 再ログイン
3. 管理者に問い合わせ

---

**Happy Budgeting! 💰✨**
